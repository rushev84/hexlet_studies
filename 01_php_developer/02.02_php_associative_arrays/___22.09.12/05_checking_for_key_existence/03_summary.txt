не указаны типы принимаемых и возвращаемых значений
05 - логичнее строку проверять на её пустоту, а не подсчитывать количество символов в строке и сравнивать с нулём
нужно сразу одной операцией mb_strtolower приводить всю строку в нижний регистр, а не делать это в цикле
в цикле можно не использовать array_key_exists, а делать сравнение с null через оператор ??