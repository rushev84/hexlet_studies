Вместо удаления ключей в цикле foreach можно использовать Collection\compact()